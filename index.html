<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Zee Chat - Private Chat App</title>
  <style>
    body { margin:0; font-family: Arial, sans-serif; background:#111; color:#fff; }
    header { background:#000; padding:15px; text-align:center; }
    header h1 { color:#0f0; margin:0; font-size:28px; }
    header img { width:40px; height:40px; vertical-align:middle; margin-right:10px; }

    #authForms { padding:20px; text-align:center; }
    #authForms input { display:block; margin:10px auto; padding:10px; width:250px; border-radius:5px; border:none; background:#222; color:#fff; }
    #authForms button { padding:10px 20px; margin:10px; border:none; border-radius:5px; background:#0f0; color:#000; cursor:pointer; }
    
    #chatInterface { display:none; padding:10px; }
    #chatDisplay { height:400px; overflow-y:auto; padding:10px; border:1px solid #444; border-radius:5px; margin-bottom:10px; }
    .chat-box { padding:8px 12px; margin:5px; border-radius:8px; max-width:70%; word-wrap: break-word; }
    .user1 { background:#0f0; color:#000; text-align:left; margin-left:5px; margin-right:auto; }
    .user2 { background:#2196F3; color:#fff; text-align:right; margin-right:5px; margin-left:auto; }
    
    #chatInput { display:flex; gap:5px; }
    #chatInput input { flex:1; padding:10px; border-radius:5px; border:none; background:#222; color:#fff; }
    #chatInput button { padding:10px 15px; border:none; border-radius:5px; background:#0f0; color:#000; cursor:pointer; }
    
    .active-status { color:#0f0; font-size:12px; text-align:right; margin-bottom:5px; }
  </style>
</head>
<body>

<header>
  <img src="chat-logo.png" alt="Logo"> Zee Chat
</header>

<section id="authForms">
  <h2>Sign Up</h2>
  <input type="email" id="signUpEmail" placeholder="Email">
  <input type="password" id="signUpPassword" placeholder="Password">
  <button onclick="signUp()">Sign Up</button>

  <h2>Log In</h2>
  <input type="email" id="loginEmail" placeholder="Email">
  <input type="password" id="loginPassword" placeholder="Password">
  <button onclick="logIn()">Log In</button>
</section>

<section id="chatInterface">
  <div class="active-status">You are online</div>
  <div id="chatDisplay"></div>
  <div id="chatInput">
    <input type="text" id="textInput" placeholder="Type your message...">
    <button onclick="sendMessage()">Send</button>
    <button onclick="sendImage()">ðŸ“·</button>
  </div>
</section>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
  // Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyCO_Pmu6QYJWbnNvRUYyRLvi6SLIfUrtHI",
    authDomain: "zeeworldyhi.firebaseapp.com",
    databaseURL: "https://zeeworldyhi-default-rtdb.firebaseio.com/",
    projectId: "zeeworldyhi",
    storageBucket: "zeeworldyhi.firebasestorage.app",
    messagingSenderId: "154414924399",
    appId: "1:154414924399:web:4817b6b3e7cb5f91ba439a"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  var auth = firebase.auth();
  var database = firebase.database();
  var currentUser;
  var chatRef;

  // Sign Up
  function signUp() {
    var email = document.getElementById('signUpEmail').value;
    var password = document.getElementById('signUpPassword').value;
    auth.createUserWithEmailAndPassword(email, password)
      .then(userCred => {
        alert("Signed up!");
      })
      .catch(err => alert(err.message));
  }

  // Log In
  function logIn() {
    var email = document.getElementById('loginEmail').value;
    var password = document.getElementById('loginPassword').value;
    auth.signInWithEmailAndPassword(email, password)
      .then(userCred => {
        currentUser = userCred.user;
        document.getElementById('authForms').style.display = 'none';
        document.getElementById('chatInterface').style.display = 'block';
        startChat();
      })
      .catch(err => alert(err.message));
  }

  // Start chat after login
  function startChat() {
    var friendId = "friendUserId"; // Replace with actual friend's UID
    var chatRoomId = [currentUser.uid, friendId].sort().join('-');
    chatRef = database.ref('chats/' + chatRoomId + '/messages');

    // Listen for new messages
    chatRef.on('child_added', snapshot => {
      displayMessage(snapshot.val());
    });
  }

  // Display message
  function displayMessage(msg) {
    var chatDisplay = document.getElementById('chatDisplay');
    var msgDiv = document.createElement('div');
    msgDiv.classList.add(msg.user === currentUser.email ? 'chat-box', 'user1' : 'chat-box', 'user2');
    msgDiv.innerHTML = "<strong>" + msg.user + ":</strong> " + msg.text;
    chatDisplay.appendChild(msgDiv);
    chatDisplay.scrollTop = chatDisplay.scrollHeight;
  }

  // Send message
  function sendMessage() {
    var text = document.getElementById('textInput').value;
    if (!text) return;
    var msg = { user: currentUser.email, text: text, timestamp: Date.now() };
    chatRef.push(msg, err => {
      if (err) alert("Error: " + err.message);
      else document.getElementById('textInput').value = "";
    });
  }

  // Send image (placeholder)
  function sendImage() {
    alert("Image sending coming soon!");
  }

</script>
</body>
  </html>
