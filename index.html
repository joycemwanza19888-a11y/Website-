<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Zee Web Chat - Henicks GPT Field Tech</title>
  <meta name="description" content="Website created by Henry Tallen, Zee, owner of Henicks GPT Field Tech. Share your talent and posts.">
  <style>
    body { font-family: Arial; margin:0; padding:0; background:#111; color:#FFD700; }
    header { background:#000; padding:15px; text-align:center; }
    section { padding:20px; }
    .card { padding:15px; margin-bottom:15px; border-radius:8px; }
    .sent { background:#FFD700; color:#111; text-align:right; max-width:70%; margin-left:auto; margin-right:10px; padding:10px; border-radius:15px; }
    .received { background:#333; color:#FFD700; text-align:left; max-width:70%; margin-left:10px; margin-right:auto; padding:10px; border-radius:15px; }
    input, textarea { width:100%; margin:5px 0; padding:8px; border-radius:5px; border:none; }
    button { background:#FFD700; color:#111; border:none; padding:10px; border-radius:5px; cursor:pointer; }
    button:hover { opacity:0.9; }
    #posts { overflow-y: scroll; height: 400px; margin-bottom:20px; }
    #chatInput { display:flex; gap:10px; margin-top:15px; }
    #chatInput input { flex:1; padding:10px; background:#1a1a1a; border-radius:5px; color:#FFD700; }
    #chatInput button { background:#FFD700; padding:10px 20px; border-radius:5px; cursor:pointer; }
    #authForms { display: flex; flex-direction: column; align-items: center; gap: 10px; }
    #chatInterface { display: none; }
  </style>
</head>
<body>

<header>
  <h1>Zee Web Chat</h1>
  <p>Website created by Henry Tallen, Zee, owner of Henicks GPT Field Tech</p>
</header>

<!-- Authentication Forms (Visible until login/signup) -->
<section id="authForms">
  <div>
    <h2>Sign Up</h2>
    <input type="email" id="signUpEmail" placeholder="Enter your email">
    <input type="password" id="signUpPassword" placeholder="Enter your password">
    <button onclick="signUp()">Sign Up</button>
  </div>

  <div>
    <h2>Log In</h2>
    <input type="email" id="loginEmail" placeholder="Enter your email">
    <input type="password" id="loginPassword" placeholder="Enter your password">
    <button onclick="logIn()">Log In</button>
  </div>
</section>

<!-- Chat Interface (Hidden until login) -->
<section id="chatInterface">
  <div class="card">
    <h2>Send Message</h2>
    <div id="chatInput">
      <input type="text" id="nameInput" placeholder="Your Name">
      <input type="text" id="textInput" placeholder="Type a message">
      <button onclick="sendMessage()">Send</button>
    </div>
    <p id="status"></p>
  </div>

  <section>
    <h2>Chat</h2>
    <div id="posts"></div>
  </section>
</section>

<!-- Firebase v8 SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
  // Firebase config
  var firebaseConfig = {
    apiKey: "AIzaSyCO_Pmu6QYJWbnNvRUYyRLvi6SLIfUrtHI",
    authDomain: "zeeworldyhi.firebaseapp.com",
    databaseURL: "https://zeeworldyhi-default-rtdb.firebaseio.com/",
    projectId: "zeeworldyhi",
    storageBucket: "zeeworldyhi.firebasestorage.app",
    messagingSenderId: "154414924399",
    appId: "1:154414924399:web:4817b6b3e7cb5f91ba439a"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  var database = firebase.database();
  var auth = firebase.auth();

  // Sign Up function
  function signUp() {
    var email = document.getElementById('signUpEmail').value;
    var password = document.getElementById('signUpPassword').value;
    auth.createUserWithEmailAndPassword(email, password)
      .then(function(userCredential) {
        alert("Signed Up Successfully!");
      })
      .catch(function(error) {
        alert("Error: " + error.message);
      });
  }

  // Log In function
  function logIn() {
    var email = document.getElementById('loginEmail').value;
    var password = document.getElementById('loginPassword').value;
    auth.signInWithEmailAndPassword(email, password)
      .then(function(userCredential) {
        alert("Logged In Successfully!");
        // Hide the sign-up/login forms after login
        document.getElementById('authForms').style.display = "none";
        // Show the chat interface
        document.getElementById('chatInterface').style.display = "block";
      })
      .catch(function(error) {
        alert("Error: " + error.message);
      });
  }

  // Send message function
  function sendMessage() {
    var name = document.getElementById('nameInput').value || "Anonymous";
    var text = document.getElementById('textInput').value;
    if (!text) return alert("Write something before sending!");

    var messageData = { name: name, text: text, timestamp: Date.now() };
    var newMessageRef = database.ref('messages').push();
    newMessageRef.set(messageData, function(error) {
      if (error) {
        document.getElementById('status').innerText = "Error: " + error;
      } else {
        document.getElementById('status').innerText = "Message sent!";
        document.getElementById('textInput').value = "";
      }
    });
  }

  // Real-time listener for messages
  var messagesRef = database.ref('messages');
  messagesRef.on('value', function(snapshot) {
    document.getElementById('posts').innerHTML = "";
    var messages = snapshot.val();
    if (!messages) return;

    var sortedKeys = Object.keys(messages).sort(function(a,b) {
      return messages[a].timestamp - messages[b].timestamp;
    });

    sortedKeys.forEach(function(key) {
      var msg = messages[key];
      var messageClass = msg.name === document.getElementById('nameInput').value ? "sent" : "received";
      var card = document.createElement('div');
      card.classList.add(messageClass);
      card.innerHTML = "<p><strong>" + msg.name + "</strong></p><p>" + msg.text + "</p>";
      document.getElementById('posts').appendChild(card);
      document.getElementById('posts').scrollTop = document.getElementById('posts').scrollHeight;
    });
  });

</script>

</body>
  </html>
