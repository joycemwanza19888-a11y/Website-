<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Zee Web Chat</title>
<style>
  body { margin:0; padding:0; font-family: Arial; background:#111; color:#fff; }
  header { background:#000; padding:15px; text-align:center; }
  h1 { margin:0; color:#00FF00; }
  .container { padding:15px; }
  .messages { max-height:70vh; overflow-y:auto; display:flex; flex-direction:column; gap:5px; margin-bottom:10px; }
  .bubble { padding:10px 15px; border-radius:15px; max-width:80%; word-break:break-word; }
  .self { background:#00FF00; color:#000; align-self:flex-start; }
  .other { background:#007BFF; color:#fff; align-self:flex-end; }
  .input-area { display:flex; gap:5px; }
  input { flex:1; padding:10px; border-radius:20px; border:none; }
  button { padding:10px 15px; border:none; border-radius:20px; background:#00FF00; color:#000; cursor:pointer; }
  button:hover { opacity:0.9; }
</style>
</head>
<body>

<header>
  <h1>Zee Web Chat</h1>
  <p>Henicks GPT Field Tech</p>
</header>

<div class="container">
  <div id="messages" class="messages"></div>

  <div class="input-area">
    <input type="text" id="messageInput" placeholder="Type your message...">
    <button id="sendBtn">Send</button>
  </div>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCO_Pmu6QYJWbnNvRUYyRLvi6SLIfUrtHI",
    authDomain: "zeeworldyhi.firebaseapp.com",
    databaseURL: "https://zeeworldyhi-default-rtdb.firebaseio.com/",
    projectId: "zeeworldyhi",
    storageBucket: "zeeworldyhi.appspot.com",
    messagingSenderId: "154414924399",
    appId: "1:154414924399:web:4817b6b3e7cb5f91ba439a"
  };

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const messagesRef = db.ref('messages');

  const messagesDiv = document.getElementById('messages');
  const input = document.getElementById('messageInput');
  const sendBtn = document.getElementById('sendBtn');

  // Unique session ID to mark your messages
  const myUID = 'user_' + Math.floor(Math.random() * 100000);

  function displayMessage(msgData) {
    const div = document.createElement('div');
    div.classList.add('bubble');
    div.classList.add(msgData.uid === myUID ? 'self' : 'other');
    div.innerText = msgData.text;
    messagesDiv.appendChild(div);
    messagesDiv.scrollTop = messagesDiv.scrollHeight; // scroll to bottom
  }

  // Send message
  sendBtn.addEventListener('click', () => {
    const text = input.value.trim();
    if(!text) return;
    const msgData = { text: text, uid: myUID, timestamp: Date.now() };

    messagesRef.push(msgData, (err) => {
      if(err) alert("Error sending message!");
      else input.value = ""; // clear input
    });
  });

  // Load all messages and listen for new ones
  messagesRef.orderByChild('timestamp').on('value', snapshot => {
    messagesDiv.innerHTML = ""; // clear
    const msgs = snapshot.val();
    if(!msgs) return;
    Object.keys(msgs).sort((a,b)=>msgs[a].timestamp - msgs[b].timestamp)
      .forEach(k => displayMessage(msgs[k]));
  });
</script>

</body>
</html>
